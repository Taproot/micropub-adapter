<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                                <h4 class="phpdocumentor-sidebar__root-namespace"><a href="namespaces/taproot.html"><abbr title="\Taproot">Taproot</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="namespaces/taproot-micropub.html"><abbr title="\Taproot\Micropub">Micropub</abbr></a></li>
                                    </ul>
                        </section>

    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/taproot.html">Taproot</a></li>
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/taproot-micropub.html">Micropub</a></li>
    </ul>

    <article class="phpdocumentor-element -class">
        <h2 class="phpdocumentor-content__title">
    MicropubAdapter

    
    
    
    </h2>

        <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">75</span>
</aside>

            <p class="phpdocumentor-summary">Micropub Adapter Abstract Superclass</p>

    <section class="phpdocumentor-description"><p>Subclass this class and implement the various <code class="prettyprint">*Callback()</code> methods to handle different
types of micropub request.</p>
<p>Then, handling a micropub request is as simple as</p>
<pre class="prettyprint"><code class="prettyprint">$mp = new YourMicropubAdapter();
return $mp-&gt;handleRequest($request);
</code></pre>
<p>The same goes for a media endpoint:</p>
<pre class="prettyprint"><code class="prettyprint">return $mp-&gt;handleMediaEndpointRequest($request);
</code></pre>
<p>Subclasses <strong>must</strong> implement the abstract callback method <code class="prettyprint">verifyAccessToken()</code> in order
to have a functional micropub endpoint. All other callback methods are optional, and
their functionality is enabled if a subclass implements them. Feel free to define your own
constructor, and make any implementation-specific objects available to callbacks by storing
them as properties.</p>
<p>Each callback is passed data corresponding to the type of micropub request dispatched
to it, but can also access the original request via <code class="prettyprint">$this-&gt;request</code>. Data about the
currently authenticated user is available in <code class="prettyprint">$this-&gt;user</code>.</p>
<p>Each callback return data in a format defined by the callback, which will be
converted into the appropriate HTTP Response. Returning an instance of <code class="prettyprint">ResponseInterface</code>
from a callback will cause that response to immediately be returned unchanged. Most callbacks
will also automatically convert an array return value into a JSON response, and will convert
the following string error codes into properly formatted micropub error responses:</p>
<ul>
<li>
<code class="prettyprint">'invalid_request'</code>
</li>
<li>
<code class="prettyprint">'insufficient_scope'</code>
</li>
<li>
<code class="prettyprint">'unauthorized'</code>
</li>
<li>
<code class="prettyprint">'forbidden'</code>
</li>
</ul>
<p>In practise, you’ll mostly be returning the first two, as the others are handled automatically.</p>
<p>MicropubAdapter <strong>does not handle any authorization or permissions</strong>, as which users and
scopes have what permissions depends on your implementation. It’s up to you to confirm that
the current access token has sufficient scope and permissions to carry out any given action
within your callback, and return <code class="prettyprint">'insufficient_scope'</code> or your own custom instance of
<code class="prettyprint">ResponseInterface</code>.</p>
<p>Most callbacks halt execution, but some are optional. Returning a falsy value from these
optional callbacks continues execution uninterrupted. This is usually to allow you to pre-
empt standard micropub handling and implement custom extensions.</p>
<p>MicropubAdapter works with PSR-7 HTTP Interfaces. Specifically, expects an object implementing
<code class="prettyprint">ServerRequestInterface</code>, and will return an object implemeting <code class="prettyprint">ResponseInterface</code>. If you
want to return responses from your callbacks, you’re free to use any suitable implementation.
For internally-generated responses, <code class="prettyprint">Nyholm\Psr7\Response</code> is used.</p>
<p>If you’re not using a framework which works with PSR-7 objects, you’ll have to convert
whatever request data you have into something implementing PSR-7 <code class="prettyprint">ServerRequestInterface</code>,
and convert the returned <code class="prettyprint">ResponseInterface</code>s to something you can work with.</p>
</section>


    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/"> https://micropub.spec.indieweb.org/ </a>
                    
                                    </dd>
                            <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://indieweb.org/micropub"> https://indieweb.org/micropub </a>
                    
                                    </dd>
                        </dl>






<h3 id="toc">
    Table of Contents
    <a href="#toc" class="headerlink"><i class="fas fa-link"></i></a>
</h3>

<dl class="phpdocumentor-table-of-contents">
                <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_logger">$logger</a>
    <span>
                &nbsp;: mixed            </span>
</dt>
<dd></dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_request">$request</a>
    <span>
                &nbsp;: mixed            </span>
</dt>
<dd></dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_user">$user</a>
    <span>
                &nbsp;: mixed            </span>
</dt>
<dd></dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -private">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_errorMessages">$errorMessages</a>
    <span>
                &nbsp;: mixed            </span>
</dt>
<dd></dd>

                <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_configurationQueryCallback">configurationQueryCallback()</a>
    <span>
                        &nbsp;: array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Configuration Query Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_createCallback">createCallback()</a>
    <span>
                        &nbsp;: string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Create Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_deleteCallback">deleteCallback()</a>
    <span>
                        &nbsp;: string|true|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Delete Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_extensionCallback">extensionCallback()</a>
    <span>
                        &nbsp;: false|array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Micropub Extension Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_handleMediaEndpointRequest">handleMediaEndpointRequest()</a>
    <span>
                        &nbsp;: <abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Handle Media Endpoint Request</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_handleRequest">handleRequest()</a>
    <span>
                        &nbsp;: <abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Handle Micropub Request</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_mediaEndpointCallback">mediaEndpointCallback()</a>
    <span>
                        &nbsp;: string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Media Endpoint Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_mediaEndpointExtensionCallback">mediaEndpointExtensionCallback()</a>
    <span>
                        &nbsp;: false|array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Micropub Media Endpoint Extension Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_sourceQueryCallback">sourceQueryCallback()</a>
    <span>
                        &nbsp;: array&lt;string|int, mixed&gt;|false|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Source Query Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_undeleteCallback">undeleteCallback()</a>
    <span>
                        &nbsp;: string|true|array&lt;string|int, mixed&gt;    </span>
</dt>
<dd>Undelete Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_updateCallback">updateCallback()</a>
    <span>
                        &nbsp;: true|string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Update Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_verifyAccessTokenCallback">verifyAccessTokenCallback()</a>
    <span>
                        &nbsp;: array&lt;string|int, mixed&gt;|string|false|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>Verify Access Token Callback</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_getLogger">getLogger()</a>
    <span>
                        &nbsp;: <abbr title="\Psr\Log\LoggerInterface">LoggerInterface</abbr>    </span>
</dt>
<dd>Get Logger</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -private">
    <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_toResponse">toResponse()</a>
    <span>
                        &nbsp;: <abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>    </span>
</dt>
<dd>To Response</dd>

        </dl>



        

        
    <section class="phpdocumentor-properties">
        <h3 class="phpdocumentor-elements__header" id="properties">
            Properties
            <a href="classes/Taproot-Micropub-MicropubAdapter.html#properties" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_logger">
        $logger
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_logger" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">90</span>
</aside>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">$logger</span>
    </code>

        <section class="phpdocumentor-description"></section>

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_request">
        $request
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_request" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">85</span>
</aside>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">$request</span>
    </code>

        <section class="phpdocumentor-description"></section>

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_user">
        $user
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_user" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">80</span>
</aside>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">$user</span>
    </code>

        <section class="phpdocumentor-description"></section>

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_errorMessages">
        $errorMessages
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#property_errorMessages" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">95</span>
</aside>

    
    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">$errorMessages</span>
     = <span class="phpdocumentor-signature__default-value">[
    // Built-in micropub error types
    &#039;insufficient_scope&#039; =&gt; &#039;Your access token does not grant the scope required for this action.&#039;,
    &#039;forbidden&#039; =&gt; &#039;The authenticated user does not have permission to perform this request.&#039;,
    &#039;unauthorized&#039; =&gt; &#039;The request did not provide an access token.&#039;,
    &#039;invalid_request&#039; =&gt; &#039;The request was invalid.&#039;,
    // Custom errors
    &#039;access_token_invalid&#039; =&gt; &#039;The provided access token could not be verified.&#039;,
    &#039;missing_url_parameter&#039; =&gt; &#039;The request did not provide the required url parameter.&#039;,
    &#039;post_with_given_url_not_found&#039; =&gt; &#039;A post with the given URL could not be found.&#039;,
    &#039;not_implemented&#039; =&gt; &#039;This functionality is not implemented.&#039;,
]</span></code>

        <section class="phpdocumentor-description"></section>

    

</article>
            </section>

            <section class="phpdocumentor-methods">
        <h3 class="phpdocumentor-elements__header" id="methods">
            Methods
            <a href="classes/Taproot-Micropub-MicropubAdapter.html#methods" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_configurationQueryCallback">
        configurationQueryCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_configurationQueryCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">201</span>
</aside>

        <p class="phpdocumentor-summary">Configuration Query Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">configurationQueryCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$params</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handle a GET q=config query. Should return either a custom ResponseInterface, or an
array structure conforming to the micropub specification, e.g.:</p>
<pre class="prettyprint"><code class="prettyprint">[
  'media-endpoint' =&gt; 'http://example.com/your-media-endpoint',
  'syndicate-to' =&gt; [[
    'uid' =&gt; 'https://myfavoritesocialnetwork.example/aaronpk', // Required
    'name' =&gt; 'aaronpk on myfavoritesocialnetwork', // Required
    'service' =&gt; [ // Optional
      'name' =&gt; 'My Favorite Social Network',
      'url' =&gt; 'https://myfavoritesocialnetwork.example/',
      'photo' =&gt; 'https://myfavoritesocialnetwork.example/img/icon.png',
    ],
    'user' =&gt; [ // Optional
      'name' =&gt; 'aaronpk',
      'photo' =&gt; 'https://myfavoritesocialnetwork.example/aaronpk',
      'url' =&gt; 'https://myfavoritesocialnetwork.example/aaronpk/photo.jpg'
    ]
  ]]
]
</code></pre>
<p>The results from this function are also used to respond to syndicate-to queries. If
a raw ResponseInterface is returned, that will be used as-is. If an array structure
is returned, syndicate-to queries will extract the syndicate-to information and
return just that.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$params</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The unaltered query string parameters from the request.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#configuration"> https://micropub.spec.indieweb.org/#configuration </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"><p>Return either an array with config data, a micropub error string, or a ResponseInterface to short-circuit</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_createCallback">
        createCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_createCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">330</span>
</aside>

        <p class="phpdocumentor-summary">Create Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">createCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$data</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$uploadedFiles</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handles a create request. JSON parameters are left unchanged, urlencoded
form parameters are normalized into canonical JSON form.</p>
<ul>
<li>If the current access token scope doesn’t permit updates, return either
<code class="prettyprint">'insufficient_scope'</code>, an array with <code class="prettyprint">'error'</code> and <code class="prettyprint">'error_description'</code>
keys, or your own ResponseInterface.</li>
<li>Create the post.</li>
<li>On an error, return either a micropub error code to be upgraded into a
full error response, or your own ResponseInterface.</li>
<li>On success, return either the URL of the created post to be upgraded into
a HTTP 201 success response, or your own ResponseInterface.</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$data</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The data to create a post with in canonical MF2 structure</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$uploadedFiles</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>an associative array mapping property names to UploadedFileInterface objects</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#create"> https://micropub.spec.indieweb.org/#create </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"><p>A URL on success, a micropub error code, an array to be returned as JSON response, or a ready-made ResponseInterface</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_deleteCallback">
        deleteCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_deleteCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">248</span>
</aside>

        <p class="phpdocumentor-summary">Delete Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">deleteCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$url</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string|true|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handle a POST action=delete request.</p>
<ul>
<li>Look for a post identified by the $url parameter.</li>
<li>If it doesn’t exist: return <code class="prettyprint">false</code> or <code class="prettyprint">'invalid_request'</code> as a shortcut for an
HTTP 400 invalid_request response.</li>
<li>If the current access token scope doesn’t permit deletion, return <code class="prettyprint">'insufficient_scope'</code>,
an array with <code class="prettyprint">'error'</code> and <code class="prettyprint">'error_description'</code> keys, or your own ResponseInterface.</li>
<li>If the post exists and can be deleted or is already deleted, delete it and return true.</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$url</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The URL of the post to be deleted.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#delete"> https://micropub.spec.indieweb.org/#delete </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">string|true|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_extensionCallback">
        extensionCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_extensionCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">162</span>
</aside>

        <p class="phpdocumentor-summary">Micropub Extension Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">extensionCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$request</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">false|array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>This callback is called after an access token is verified, but before any micropub-
specific handling takes place. This is the place to implement support for micropub
extensions.</p>
<p>If a falsy value is returned, the request continues to be handled as a regular
micropub request. If it returns a truthy value (either a MP error code, an array to
be returned as JSON, or a ready-made ResponseInterface), request handling is halted
and the returned value is converted into a response and returned.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$request</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"></section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://indieweb.org/Micropub-extensions"> https://indieweb.org/Micropub-extensions </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">false|array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_handleMediaEndpointRequest">
        handleMediaEndpointRequest()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_handleMediaEndpointRequest" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">633</span>
</aside>

        <p class="phpdocumentor-summary">Handle Media Endpoint Request</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">handleMediaEndpointRequest</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$request</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handle a request to a micropub media-endpoint.</p>
<p>As with <code class="prettyprint">handleRequest()</code>, <code class="prettyprint">$this-&gt;request</code> and <code class="prettyprint">$this-&gt;user</code> are made available
for use within callbacks.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$request</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"></section>

            </dd>
            </dl>

    

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_handleRequest">
        handleRequest()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_handleRequest" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">414</span>
</aside>

        <p class="phpdocumentor-summary">Handle Micropub Request</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">handleRequest</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$request</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handle an incoming request to a micropub endpoint, performing error checking and
handing execution off to the appropriate callback.</p>
<p><code class="prettyprint">$this-&gt;request</code> is set to the value of the <code class="prettyprint">$request</code> argument, for use within
callbacks. If the access token could be verified, <code class="prettyprint">$this-&gt;user</code> is set to the value
returned from <code class="prettyprint">verifyAccessTokenCallback()</code> for use within callbacks.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$request</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"></section>

            </dd>
            </dl>

    

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_mediaEndpointCallback">
        mediaEndpointCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_mediaEndpointCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">357</span>
</aside>

        <p class="phpdocumentor-summary">Media Endpoint Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">mediaEndpointCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\UploadedFileInterface">UploadedFileInterface</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$file</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>To handle file upload requests:</p>
<ul>
<li>If the current access token scope doesn’t permit uploads, return either
<code class="prettyprint">'insufficient_scope'</code>, an array with <code class="prettyprint">'error'</code> and <code class="prettyprint">'error_description'</code>
keys, or your own ResponseInterface.</li>
<li>Handle the uploaded file.</li>
<li>On an error, return either a micropub error code to be upgraded into a
full error response, or your own ResponseInterface.</li>
<li>On success, return either the URL of the created URL to be upgraded into
a HTTP 201 success response, or your own ResponseInterface.</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$file</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\UploadedFileInterface">UploadedFileInterface</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The file to upload</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#media-endpoint"> https://micropub.spec.indieweb.org/#media-endpoint </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"><p>Return the URL of the uploaded file on success, a micropub error code to be upgraded into an error response, an array for a JSON response, or a ready-made ResponseInterface</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_mediaEndpointExtensionCallback">
        mediaEndpointExtensionCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_mediaEndpointExtensionCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">381</span>
</aside>

        <p class="phpdocumentor-summary">Micropub Media Endpoint Extension Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">mediaEndpointExtensionCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$request</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">false|array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>This callback is called after an access token is verified, but before any media-
endpoint-specific handling takes place. This is the place to implement support
for micropub media endpoint extensions.</p>
<p>If a falsy value is returned, the request continues to be handled as a regular
micropub request. If it returns a truthy value (either a MP error code, an array to
be returned as JSON, or a ready-made ResponseInterface), request handling is halted
and the returned value is converted into a response and returned.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$request</span>
                : <span class="phpdocumentor-signature__argument__return-type"><abbr title="\Psr\Http\Message\ServerRequestInterface">ServerRequestInterface</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"></section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://indieweb.org/Micropub-extensions"> https://indieweb.org/Micropub-extensions </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">false|array&lt;string|int, mixed&gt;|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_sourceQueryCallback">
        sourceQueryCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_sourceQueryCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">223</span>
</aside>

        <p class="phpdocumentor-summary">Source Query Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">sourceQueryCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$url</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;|null&nbsp;</span><span class="phpdocumentor-signature__argument__name">$properties</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">null</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|false|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handle a GET q=source query.</p>
<p>The callback should return a microformats2 canonical JSON representation
of the post identified by $url, either as an array or as a ready-made ResponseInterface.</p>
<p>If the post identified by $url cannot be found, returning false will return a
correctly-formatted error response.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$url</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The URL of the post for which to return properties.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$properties</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;|null</span>
                 = <span class="phpdocumentor-signature__argument__default-value">null</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>= null The list of properties to return (all if null)</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#source-content"> https://micropub.spec.indieweb.org/#source-content </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|false|string|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"><p>Return either an array with canonical mf2 data, false if the post could not be found, a micropub error string, or a ResponseInterface to short-circuit.</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_undeleteCallback">
        undeleteCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_undeleteCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">274</span>
</aside>

        <p class="phpdocumentor-summary">Undelete Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">undeleteCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$url</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">string|true|array&lt;string|int, mixed&gt;</span></code>

        <section class="phpdocumentor-description"><p>Handle a POST action=undelete request.</p>
<ul>
<li>Look for a post identified by the $url parameter.</li>
<li>If it doesn’t exist: return <code class="prettyprint">false</code> or <code class="prettyprint">'invalid_request'</code> as a shortcut for an
HTTP 400 invalid_request response.</li>
<li>If the current access token scope doesn’t permit undeletion, return <code class="prettyprint">'insufficient_scope'</code>,
an array with <code class="prettyprint">'error'</code> and <code class="prettyprint">'error_description'</code> keys, or your own ResponseInterface.</li>
<li>If the post exists and can be undeleted, do so. Return true for success, or a URL if the
undeletion caused the post’s URL to change.</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$url</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The URL of the post to be deleted.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#delete"> https://micropub.spec.indieweb.org/#delete </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">string|true|array&lt;string|int, mixed&gt;</span>
            &mdash;
            <section class="phpdocumentor-description"><p>true on basic success, otherwise either an error string, or a URL if the undeletion caused the post’s location to change.</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_updateCallback">
        updateCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_updateCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">301</span>
</aside>

        <p class="phpdocumentor-summary">Update Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">updateCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$url</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$actions</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">true|string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Handles a POST action=update request.</p>
<ul>
<li>Look for a post identified by the $url parameter.</li>
<li>If it doesn’t exist: return <code class="prettyprint">false</code> or <code class="prettyprint">'invalid_request'</code> as a shortcut for an
HTTP 400 invalid_request response.</li>
<li>If the current access token scope doesn’t permit updates, return <code class="prettyprint">'insufficient_scope'</code>,
an array with <code class="prettyprint">'error'</code> and <code class="prettyprint">'error_description'</code> keys, or your own ResponseInterface.</li>
<li>If the post exists and can be updated, do so. Return true for basic success, or a URL if the
undeletion caused the post’s URL to change.</li>
</ul>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$url</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The URL of the post to be updated.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$actions</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The parsed body of the request, containing 'replace', 'add' and/or 'delete' keys describing the operations to perfom on the post.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#update"> https://micropub.spec.indieweb.org/#update </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">true|string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"><p>Return true for a basic success, a micropub error string, an array to be converted to a JSON response, or a ready-made ResponseInterface</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                        -abstract                                "
>
    <h4 class="phpdocumentor-element__name" id="method_verifyAccessTokenCallback">
        verifyAccessTokenCallback()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_verifyAccessTokenCallback" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">143</span>
</aside>

        <p class="phpdocumentor-summary">Verify Access Token Callback</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
    <span class="phpdocumentor-signature__abstract">abstract</span>            <span class="phpdocumentor-signature__name">verifyAccessTokenCallback</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$token</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|string|false|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Given an access token, attempt to verify it.</p>
<ul>
<li>
<p>If it’s valid, return an array to be stored in <code class="prettyprint">$this-&gt;user</code>, which typically looks
something like this:</p>
<pre class="prettyprint"><code class="prettyprint">[
  'me' =&gt; 'https://example.com',
  'client_id' =&gt; 'https://clientapp.example',
  'scope' =&gt; ['array', 'of', 'granted', 'scopes'],
  'date_issued' =&gt; \Datetime
]
</code></pre>
</li>
<li>
<p>If the toke in invalid, return one of the following:</p>
<ul>
<li>
<p><code class="prettyprint">false</code>, which will be converted into an appropriate error message.</p>
</li>
<li>
<p><code class="prettyprint">'forbidden'</code></p>
</li>
<li>
<p>An array to be converted into an error response, with the form:</p>
<pre class="prettyprint"><code class="prettyprint">[
  'error': 'forbidden'
  'error_description': 'Your custom error description'
]
</code></pre>
</li>
<li>
<p>Your own instance of <code class="prettyprint">ResponseInterface</code></p>
</li>
</ul>
</li>
</ul>
<p>MicropubAdapter treats the data as being opaque, and simply makes it
available to your callback methods for further processing, so you’re free
to structure it however you want.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$token</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The Authentication: Bearer access token.</p>
</section>

            </dd>
            </dl>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://micropub.spec.indieweb.org/#authentication-0"> https://micropub.spec.indieweb.org/#authentication-0 </a>
                    
                                    </dd>
                        </dl>

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">array&lt;string|int, mixed&gt;|string|false|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_getLogger">
        getLogger()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_getLogger" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">394</span>
</aside>

        <p class="phpdocumentor-summary">Get Logger</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                <span class="phpdocumentor-signature__name">getLogger</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Log\LoggerInterface">LoggerInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Returns an instance of Psr\LoggerInterface, used for logging. Override to
provide with your logger of choice.</p>
</section>

    
    

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Log\LoggerInterface">LoggerInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -private
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_toResponse">
        toResponse()
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#method_toResponse" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="src/MicropubAdapter.php"><a href="files/src-micropubadapter.html"><abbr title="src/MicropubAdapter.php">MicropubAdapter.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">706</span>
</aside>

        <p class="phpdocumentor-summary">To Response</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">private</span>
                <span class="phpdocumentor-signature__name">toResponse</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr>&nbsp;</span><span class="phpdocumentor-signature__argument__name">$resultOrResponse</span></span><span class="phpdocumentor-signature__argument"><span>[</span><span>, </span><span class="phpdocumentor-signature__argument__return-type">mixed&nbsp;</span><span class="phpdocumentor-signature__argument__name">$status</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">200</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span></code>

        <section class="phpdocumentor-description"><p>Intelligently convert various shortcuts into a suitable instance of
ResponseInterface. Existing ResponseInterfaces are passed through
without alteration.</p>
</section>

        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$resultOrResponse</span>
                : <span class="phpdocumentor-signature__argument__return-type">string|array&lt;string|int, mixed&gt;|<abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"></section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$status</span>
                : <span class="phpdocumentor-signature__argument__return-type">mixed</span>
                 = <span class="phpdocumentor-signature__argument__default-value">200</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                
            </dd>
            </dl>

    

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type"><abbr title="\Psr\Http\Message\ResponseInterface">ResponseInterface</abbr></span>
            &mdash;
            <section class="phpdocumentor-description"></section>

    
</article>
            </section>

    </article>
                <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
            </div>
        </div>
        <a href="classes/Taproot-Micropub-MicropubAdapter.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
</body>
</html>
